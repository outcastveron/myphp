<?php
$id=isset($_GET['id'])?$_GET['id']:'cctv1';
$city=isset($_GET['city'])?$_GET['city']:'';

$hostname = 'liveali-tpgq.cctv.cn';
$ip = $_SERVER['REMOTE_ADDR'];

if ( $city == ''){
	$ch = curl_init();
	curl_setopt($ch, CURLOPT_URL, "https://searchplugin.csdn.net/api/v1/ip/get?ip={$ip}");
	curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
	$data = curl_exec($ch);
	curl_close($ch);
	$city = json_decode($data,true)['data']['address'];
}

$Telecom_IP = array ('122.225.212.212' , '122.225.212.213' , '122.225.212.214' , '122.225.212.215' , '122.225.212.225' , '122.225.212.226' , '122.225.212.227' , '122.225.212.228' , '220.181.167.186' , '220.181.167.237' , '220.181.167.188' , '220.181.167.186', '220.181.167.240', '220.181.167.239', '220.181.167.187', '220.181.167.189', '220.181.167.238' , '42.81.21.167', '42.81.21.166' , '42.81.21.164' , '42.81.21.165' , '42.81.21.160' , '42.81.21.162' , '42.81.21.161' , '42.81.21.163' , '42.185.156.214', '42.185.156.221' , '42.185.156.215' , '42.185.156.218' , '42.185.156.220' , '42.185.156.217' , '42.185.156.216' , '42.185.156.219' , '182.201.241.65', '182.201.241.60' , '182.201.241.61' , '182.201.241.64' , '182.201.241.66' , '182.201.241.59' , '182.201.241.63' , '182.201.241.62' , '36.104.151.229', '36.104.151.231' , '36.104.151.232' , '36.104.151.233' , '36.104.151.234' , '36.104.151.227' , '36.104.151.228' , '36.104.151.230' , '36.102.211.240' , '36.102.211.237' , '36.102.211.203' , '36.102.211.241' , '36.102.211.238' , '36.102.211.236' , '36.102.211.204' , '36.102.211.239' , '150.138.40.138' , '150.138.40.139' , '150.138.40.144' , '150.138.40.178' , '150.138.40.140' , '150.138.40.142' , '150.138.40.143' , '150.138.40.141' , '27.128.221.212', '27.128.221.207' , '27.128.221.210' , '1.193.217.106', '171.15.36.238' , '123.52.60.226' , '123.52.60.225' , '113.137.56.211', '113.137.56.174' , '113.137.56.175' , '113.137.56.210' , '113.137.56.176' , '113.137.56.173' , '113.137.56.209' , '113.137.56.212' , '117.34.40.215' , '117.34.40.217' , '117.34.40.214' , '117.34.40.186' , '117.34.40.185' , '117.34.40.181' , '117.34.40.216' , '117.34.40.184' , '202.100.79.112', '202.100.79.106' , '202.100.79.107' , '202.100.79.111' , '202.100.79.110' , '202.100.79.108' , '202.100.79.109' , '36.103.152.223', '36.103.152.231' , '36.103.152.233' , '36.103.152.225' , '118.253.171.225', '118.253.172.203' , '118.253.172.204' , '118.253.172.198' , '118.253.172.201' , '118.253.172.205' , '118.253.172.199' , '118.253.171.222' , '119.96.247.178' , '119.96.247.182' , '119.96.247.183' , '119.96.247.181' , '119.96.90.212' , '119.96.247.179' , '119.96.247.185' , '119.96.33.217' , '119.96.247.184' , '106.225.232.222' , '106.225.232.226' , '106.225.232.219' , '106.225.232.223' , '106.225.232.220' , '106.225.232.225' , '106.225.232.221' , '106.225.232.224' , '111.77.198.243' , '111.77.198.226' , '111.77.198.244' , '111.77.198.242' , '111.77.198.225' , '111.77.198.252' , '111.77.198.251' , '111.77.198.250' , '58.221.32.83' , '221.230.245.102' , '58.215.158.203' , '58.215.158.201' , '58.215.158.199' , '221.230.245.104' , '121.228.188.215' , '221.230.245.103' , '221.230.245.101' , '221.230.245.106' , '221.230.245.107' , '221.230.245.105' , '58.215.158.202' , '58.215.158.197' , '58.215.158.196' , '58.215.158.200' , '58.215.158.198' , '58.215.158.201' , '58.215.158.203' , '180.101.197.250' , '180.101.197.243' , '221.230.245.108' , '117.68.76.108' , '117.68.76.103' , '117.68.76.100' , '117.68.76.104' , '117.68.76.106' , '117.68.76.107' , '117.68.76.105' , '117.68.76.99' , '101.226.28.241' , '122.225.212.213' , '222.73.33.238' , '222.73.33.240' , '222.73.33.234' , '222.73.33.241' , '222.73.33.236' , '222.73.33.237' , '222.73.33.222' , '222.73.33.235' , '117.27.148.238', '117.27.148.240' , '117.27.148.244' , '117.27.148.242' , '117.27.148.241' , '117.27.148.239' , '117.27.148.243' , '117.27.148.237' , '183.2.193.200', '183.2.193.202' , '183.2.193.201' , '183.2.193.203' , '183.2.193.204' , '183.2.193.205' , '183.2.193.198' , '183.2.193.199' , '124.227.25.196' , '124.227.25.197' , '124.227.25.198' , '124.227.25.199' , '124.227.25.200' , '124.227.25.201' , '124.227.25.202' , '124.227.25.203' , '118.112.226.211' , '118.112.226.212' , '118.112.226.205'  , '118.112.226.206'  , '118.112.226.207'  , '118.112.226.208'  , '118.112.226.209'  , '118.112.226.210' , '182.140.147.215' , '182.140.147.216' , '182.140.147.217' , '182.140.147.210' , '182.140.147.211' , '182.140.147.212' , '182.140.147.213' , '182.140.147.214' , '171.220.246.244' , '171.220.246.250' , '171.220.246.248' , '171.220.246.253' , '171.220.246.243' , '171.220.246.251' , '171.220.246.252' , '171.220.246.249' , '61.128.153.229', '119.84.54.235' , '61.128.153.231' , '119.84.54.231' , '61.128.153.228' , '61.128.153.234' , '119.84.54.234' , '61.128.153.227' , '111.123.41.115', '111.123.41.121' , '111.123.41.117' , '111.123.41.118' , '111.123.41.120' , '111.123.41.116' , '111.123.41.114' , '111.123.41.119' , '182.242.89.200', '182.242.89.201' , '182.242.89.194' , '182.242.89.198' , '182.242.89.195' , '182.242.89.196' , '182.242.89.199' , '182.242.89.197' , '118.213.94.113', '118.213.94.108' , '118.213.94.112' , '118.213.94.110' , '118.213.94.107' , '118.213.94.106' , '118.213.94.111' , '118.213.94.109' , '110.157.250.203', '110.157.250.204' , '110.157.250.208' , '110.157.250.210' , '110.157.250.209' , '110.157.247.227' , '110.157.250.207' , '110.157.247.225' , '110.157.247.229' , '110.157.250.200' , '110.157.247.226' , '110.157.247.230' , '110.157.247.233' , '110.157.247.232' , '110.157.250.199' , '110.157.247.231' , '218.77.199.226', '218.77.199.225' , '218.77.199.222' , '218.77.199.227' , '218.77.199.224' , '218.77.199.221' , '218.77.199.228' , '218.77.199.223' );

$Unicom_IP = array ('124.160.174.167' , '124.160.174.168' , '124.160.174.169' , '124.160.174.170' , '124.160.174.171' , '124.160.174.172' , '124.160.174.173' , '124.160.174.174' , '116.136.204.230' , '125.38.11.217' , '125.38.11.220' , '125.38.11.218' , '125.38.11.215' , '125.38.11.222' , '125.38.11.221' , '125.38.11.219' , '125.38.11.216' , '125.39.47.219', '125.39.47.223' , '125.39.47.217' , '125.39.47.218' , '125.39.47.216' , '125.39.47.220' , '125.39.47.221' , '125.39.47.222' , '221.211.234.89', '221.211.234.81' , '221.211.234.83' , '221.211.234.86' , '221.211.234.85' , '221.211.234.82' , '221.211.234.80' , '221.211.234.84' , '42.59.4.236', '42.59.4.240' , '42.59.4.241' , '42.59.4.239' , '42.59.4.238' , '42.59.4.237' , '42.59.4.234' , '42.59.4.235' , '122.141.229.224', '122.141.229.225' , '122.141.229.218' , '122.141.229.219' , '122.141.229.220' , '122.141.229.221' , '122.141.229.222' , '122.141.229.223' , '116.136.204.230', '116.136.204.232' , '116.136.204.236' , '116.136.204.237' , '116.136.204.231' , '116.136.204.233' , '116.136.204.235' , '116.136.204.234' , '27.221.82.240', '27.221.82.235' , '27.221.82.233' , '27.221.82.234' , '27.221.82.239' , '27.221.82.237' , '27.221.82.238' , '27.221.82.236' , '60.222.12.210', '60.222.12.215' , '60.222.12.212' , '60.222.12.209' , '60.222.12.213' , '60.222.12.211' , '60.222.12.216' , '60.222.12.214' , '121.17.123.106', '221.195.120.226' , '121.17.123.104' , '101.75.244.180' , '121.17.123.105' , '60.9.0.232' , '101.75.244.181' , '121.17.123.107' , '60.9.0.233' , '101.75.244.179' , '60.9.0.231' , '60.9.1.111' , '113.201.124.217', '113.201.124.219' , '113.201.124.216' , '113.201.124.223' , '113.201.124.221' , '113.201.124.218' , '113.201.124.222' , '113.201.124.220' , '116.176.95.53', '116.176.95.49' , '116.176.95.54' , '116.176.95.56' , '116.176.95.50' , '116.176.95.52' , '116.176.95.51' , '116.176.95.55' , '116.162.204.111', '116.162.204.110' , '116.162.204.106' , '116.162.204.109' , '116.162.204.112' , '116.162.204.108' , '116.162.204.105' , '116.162.204.107' , '116.136.204.230', '122.188.39.251' , '122.188.39.242' , '122.188.39.249' , '122.188.39.250' , '122.188.39.243' , '122.188.39.241' , '122.188.39.248' , '122.188.39.244' , '116.153.1.193', '118.212.141.243' , '118.212.141.244' , '118.212.141.240' , '118.212.141.242' , '118.212.141.248' , '116.153.1.195' , '118.212.141.241' , '218.98.31.233', '122.193.203.214' , '122.193.203.215' , '122.193.203.209' , '122.193.203.213' , '122.193.203.212' , '122.193.203.216' , '122.193.203.211' , '122.193.203.210' , '112.122.156.228', '112.122.156.225' , '112.122.156.226' , '112.122.156.231' , '112.122.156.229' , '112.122.156.227' , '112.122.156.230' , '112.122.156.232' , '140.207.236.196' , '140.207.236.192' , '140.207.236.194' , '140.207.236.191' , '140.207.236.190' , '140.207.236.195' , '140.207.236.197' , '140.207.236.193' , '163.179.228.106', '163.179.228.105' , '163.179.228.99' , '163.179.228.104' , '163.179.228.101' , '163.179.228.103' , '163.179.228.100' , '163.179.228.102' , '121.31.230.205', '121.31.230.220' , '121.31.230.219' , '121.31.230.221' , '121.31.230.216' , '121.31.230.204' , '121.31.230.218' , '121.31.230.217' , '121.31.237.230' , '121.31.237.231' , '121.31.237.232' , '121.31.237.233' , '121.31.237.229' , '121.31.237.226' , '121.31.237.227' , '121.31.237.228' , '112.194.67.108'  , '112.194.67.110'  , '112.194.67.106'  , '112.194.67.112'  , '112.194.67.107'  , '112.194.67.111' , '112.194.67.105' , '112.194.67.109' , '58.144.231.244', '58.144.231.237' , '58.144.231.243' , '58.144.231.239' , '58.144.231.241' , '58.144.231.242' , '58.144.231.238' , '58.144.231.240' , '116.171.176.229', '116.171.176.231' , '116.171.176.234' , '116.171.176.232' , '116.171.176.235' , '116.171.176.233' , '116.171.176.230' , '116.171.176.236' , '180.130.102.231', '180.130.102.227' , '180.130.102.225' , '180.130.102.232' , '180.130.102.229' , '180.130.102.230' , '180.130.102.228' , '180.130.102.226' , '43.242.166.236', '43.242.166.183' , '43.242.166.237' , '43.242.166.187' , '43.242.166.235' , '43.242.166.238' , '43.242.166.239' , '43.242.166.190' , '116.177.250.239', '116.177.250.238' , '116.177.250.244' , '116.177.250.243' , '116.177.250.242' , '116.177.250.241' , '116.177.250.240' , '116.177.250.237' , '116.178.188.57', '116.178.188.52' , '116.178.188.56' , '116.178.188.51' , '116.178.188.54' , '116.178.188.50' , '116.178.188.53' , '116.178.188.55');

$CMCC_IP = array ('111.2.79.90' , '111.2.79.91' , '111.3.88.92' , '111.2.79.93' , '111.2.79.94' , '111.1.166.107' , '111.1.166.108' , '111.1.166.109' , '111.1.166.111' , '111.1.166.113' , '39.173.32.126' , '39.173.32.136' , '111.13.104.169' , '111.132.33.226' , '111.132.34.230' , '111.132.33.230' , '111.132.33.231' , '111.132.34.225' , '111.132.33.224' , '111.132.33.227' , '111.132.33.228' , '111.132.33.229' , '111.132.34.222' , '111.132.34.231' , '111.132.33.226' , '111.132.34.230' , '111.132.33.230' , '111.132.33.231' , '111.132.34.225' , '111.132.33.224' , '111.132.33.227' , '111.132.33.228' , '111.132.33.229' , '111.132.34.222' , '111.132.34.231' , '111.31.102.238', '111.31.102.239' , '111.31.102.240' , '111.31.102.241' , '111.31.102.242' , '111.31.102.243' , '111.31.102.244' , '111.31.102.237' , '111.132.33.226' , '111.132.34.230' , '111.132.33.230' , '111.132.33.231' , '111.132.34.225' , '111.132.33.224' , '111.132.33.227' , '111.132.33.228' , '111.132.33.229' , '111.132.34.222' , '111.132.34.231' , '36.135.15.227', '36.135.15.228' , '36.135.15.223' , '36.135.15.222' , '36.135.15.225' , '36.135.15.224' , '36.135.15.226' , '36.135.15.221' , '117.161.47.203', '117.161.47.208' , '117.161.47.206' , '117.161.47.205' , '117.161.47.209' , '117.161.47.202' , '117.161.47.207' , '117.161.47.204' , '120.220.39.239', '120.220.39.240' , '120.220.79.233' , '120.220.39.238' , '120.220.39.237' , '120.223.243.136' , '120.220.39.234' , '120.223.243.137' , '120.220.39.235' , '120.223.243.138' , '120.220.79.234' , '120.220.79.232' , '120.223.243.147' , '120.220.39.241' , '120.220.79.235' , '120.220.39.236' , '183.204.242.221', '111.6.254.236' , '111.6.254.238' , '111.7.89.204' , '111.6.181.65' , '111.7.187.174' , '111.6.254.237' , '111.6.249.206' , '111.6.254.235' , '111.6.254.239' , '111.6.254.241' , '111.6.254.242' , '111.6.254.240' , '120.226.157.231', '183.214.3.197' , '183.214.3.214' , '183.214.3.200' , '183.214.3.211' , '183.214.3.212' , '183.214.3.198' , '183.214.3.199' , '36.150.239.223' , '223.109.129.107' , '223.111.25.226' , '223.109.129.108' , '223.109.129.22' , '223.109.129.109' , '223.109.129.64' , '223.109.129.66' , '223.111.25.225' , '112.50.108.189', '112.50.108.183' , '112.50.108.186' , '112.50.108.188' , '112.50.108.244' , '112.50.108.185' , '112.50.108.187' , '112.50.108.184' , '120.233.47.78', '183.240.241.107' , '120.233.47.75' , '120.233.47.73' , '183.240.241.108' , '183.240.241.104' , '120.233.47.74' , '183.240.241.106' , '120.233.47.79' , '120.233.47.80' , '120.233.47.76' , '120.233.47.77' , '36.159.112.112', '36.159.112.106' , '36.159.112.107' , '36.159.112.110' , '36.159.112.109' , '36.159.112.105' , '36.159.112.111' , '36.159.112.108' , '117.180.231.54', '117.180.231.51' , '117.180.231.52' , '117.180.231.53' , '117.180.231.50' , '117.180.231.93' , '117.180.231.94' , '117.180.231.49' , '36.189.232.109', '36.189.232.110' , '36.189.232.111' , '36.189.233.25' , '36.189.233.26' , '36.189.233.27' , '36.189.233.28' , '36.189.233.29' , '36.189.233.30' , '36.189.233.31' , '36.189.233.32' , '36.189.232.104' , '36.189.232.105' , '36.189.232.106' , '36.189.232.107' , '36.189.232.108' , '111.29.42.178', '111.29.42.145' , '111.29.42.142' , '111.29.42.143' , '111.29.42.147' , '111.29.42.146' , '111.29.42.148' , '111.29.42.144' );

$ip = '';
if (strpos($city,"浙江")){
	if (strpos($city,"电信")){
		$ipArray = array ('122.225.212.212' , '122.225.212.213' , '122.225.212.214' , '122.225.212.215' , '122.225.212.225' , '122.225.212.226' , '122.225.212.227' , '122.225.212.228');
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"移动")){
		$ipArray = array ('111.2.79.90' , '111.2.79.91' , '111.3.88.92' , '111.2.79.93' , '111.2.79.94' , '111.1.166.107' , '111.1.166.108' , '111.1.166.109' , '111.1.166.111' , '111.1.166.113' , '39.173.32.126' , '39.173.32.136');
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"联通")){
		$ipArray = array ('124.160.174.167' , '124.160.174.168' , '124.160.174.169' , '124.160.174.170' , '124.160.174.171' , '124.160.174.172' , '124.160.174.173' , '124.160.174.174');
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else {
		$ip = gethostbyname($hostname);
	}
} else if (strpos($city,"北京")){
	if (strpos($city,"电信")){
		$ipArray = array ('220.181.167.186' , '220.181.167.237' , '220.181.167.188' , '220.181.167.186', '220.181.167.240', '220.181.167.239', '220.181.167.187', '220.181.167.189', '220.181.167.238');
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"移动")){
		$ipArray = array ('111.13.104.169' , '111.132.33.226' , '111.132.34.230' , '111.132.33.230' , '111.132.33.231' , '111.132.34.225' , '111.132.33.224' , '111.132.33.227' , '111.132.33.228' , '111.132.33.229' , '111.132.34.222' , '111.132.34.231' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"联通")){
		$ipArray = array ('116.136.204.230' , '125.38.11.217' , '125.38.11.220' , '125.38.11.218' , '125.38.11.215' , '125.38.11.222' , '125.38.11.221' , '125.38.11.219' , '125.38.11.216');
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"铁通")){
		$ipArray = array ( '111.132.33.226' , '111.132.34.230' , '111.132.33.230' , '111.132.33.231' , '111.132.34.225' , '111.132.33.224' , '111.132.33.227' , '111.132.33.228' , '111.132.33.229' , '111.132.34.222' , '111.132.34.231');
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else {
		$ip = gethostbyname($hostname);
	}
} else if (strpos($city,"天津")){
	if (strpos($city,"电信")){
		$ipArray = array ( '42.81.21.167', '42.81.21.166' , '42.81.21.164' , '42.81.21.165' , '42.81.21.160' , '42.81.21.162' , '42.81.21.161' , '42.81.21.163' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"移动")){
		$ipArray = array ( '111.31.102.238', '111.31.102.239' , '111.31.102.240' , '111.31.102.241' , '111.31.102.242' , '111.31.102.243' , '111.31.102.244' , '111.31.102.237' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"联通")){
		$ipArray = array ( '125.39.47.219', '125.39.47.223' , '125.39.47.217' , '125.39.47.218' , '125.39.47.216' , '125.39.47.220' , '125.39.47.221' , '125.39.47.222' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else {
		$ip = gethostbyname($hostname);
	}
} else if (strpos($city,"黑龙江")){
	if (strpos($city,"电信")){
		$ipArray = array ( '42.185.156.214', '42.185.156.221' , '42.185.156.215' , '42.185.156.218' , '42.185.156.220' , '42.185.156.217' , '42.185.156.216' , '42.185.156.219' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"移动")){
		$ipArray = array ( '111.132.33.226' , '111.132.34.230' , '111.132.33.230' , '111.132.33.231' , '111.132.34.225' , '111.132.33.224' , '111.132.33.227' , '111.132.33.228' , '111.132.33.229' , '111.132.34.222' , '111.132.34.231');
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"联通")){
		$ipArray = array ( '221.211.234.89', '221.211.234.81' , '221.211.234.83' , '221.211.234.86' , '221.211.234.85' , '221.211.234.82' , '221.211.234.80' , '221.211.234.84' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else {
		$ip = gethostbyname($hostname);
	}
} else if (strpos($city,"辽宁")){
	if (strpos($city,"电信")){
		$ipArray = array ( '182.201.241.65', '182.201.241.60' , '182.201.241.61' , '182.201.241.64' , '182.201.241.66' , '182.201.241.59' , '182.201.241.63' , '182.201.241.62' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"移动")){
		$ipArray = array ( '', '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"联通")){
		$ipArray = array ( '42.59.4.236', '42.59.4.240' , '42.59.4.241' , '42.59.4.239' , '42.59.4.238' , '42.59.4.237' , '42.59.4.234' , '42.59.4.235' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else {
		$ip = gethostbyname($hostname);
	}
} else if (strpos($city,"吉林")){
	if (strpos($city,"电信")){
		$ipArray = array ( '36.104.151.229', '36.104.151.231' , '36.104.151.232' , '36.104.151.233' , '36.104.151.234' , '36.104.151.227' , '36.104.151.228' , '36.104.151.230' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"移动")){
		$ipArray = array ( '36.135.15.227', '36.135.15.228' , '36.135.15.223' , '36.135.15.222' , '36.135.15.225' , '36.135.15.224' , '36.135.15.226' , '36.135.15.221' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"联通")){
		$ipArray = array ( '122.141.229.224', '122.141.229.225' , '122.141.229.218' , '122.141.229.219' , '122.141.229.220' , '122.141.229.221' , '122.141.229.222' , '122.141.229.223' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else {
		$ip = gethostbyname($hostname);
	}
} else if (strpos($city,"内蒙")){
	if (strpos($city,"电信")){
		$ipArray = array ('36.102.211.240' , '36.102.211.237' , '36.102.211.203' , '36.102.211.241' , '36.102.211.238' , '36.102.211.236' , '36.102.211.204' , '36.102.211.239' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"移动")){
		$ipArray = array ( '117.161.47.203', '117.161.47.208' , '117.161.47.206' , '117.161.47.205' , '117.161.47.209' , '117.161.47.202' , '117.161.47.207' , '117.161.47.204' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"联通")){
		$ipArray = array ( '116.136.204.230', '116.136.204.232' , '116.136.204.236' , '116.136.204.237' , '116.136.204.231' , '116.136.204.233' , '116.136.204.235' , '116.136.204.234' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else {
		$ip = gethostbyname($hostname);
	}
} else if (strpos($city,"山东")){
	if (strpos($city,"电信")){
		$ipArray = array ( '150.138.40.138' , '150.138.40.139' , '150.138.40.144' , '150.138.40.178' , '150.138.40.140' , '150.138.40.142' , '150.138.40.143' , '150.138.40.141' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"移动")){
		$ipArray = array ( '120.220.39.239', '120.220.39.240' , '120.220.79.233' , '120.220.39.238' , '120.220.39.237' , '120.223.243.136' , '120.220.39.234' , '120.223.243.137' , '120.220.39.235' , '120.223.243.138' , '120.220.79.234' , '120.220.79.232' , '120.223.243.147' , '120.220.39.241' , '120.220.79.235' , '120.220.39.236' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"联通")){
		$ipArray = array ( '27.221.82.240', '27.221.82.235' , '27.221.82.233' , '27.221.82.234' , '27.221.82.239' , '27.221.82.237' , '27.221.82.238' , '27.221.82.236' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else {
		$ip = gethostbyname($hostname);
	}
} else if (strpos($city,"山西")){
	if (strpos($city,"电信")){
		$ipArray = array ( '', '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"移动")){
		$ipArray = array ( '', '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"联通")){
		$ipArray = array ( '60.222.12.210', '60.222.12.215' , '60.222.12.212' , '60.222.12.209' , '60.222.12.213' , '60.222.12.211' , '60.222.12.216' , '60.222.12.214' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else {
		$ip = gethostbyname($hostname);
	}
} else if (strpos($city,"河北")){
	if (strpos($city,"电信")){
		$ipArray = array ( '27.128.221.212', '27.128.221.207' , '27.128.221.210' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"移动")){
		$ipArray = array ( '', '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"联通")){
		$ipArray = array ( '121.17.123.106', '221.195.120.226' , '121.17.123.104' , '101.75.244.180' , '121.17.123.105' , '60.9.0.232' , '101.75.244.181' , '121.17.123.107' , '60.9.0.233' , '101.75.244.179' , '60.9.0.231' , '60.9.1.111' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else {
		$ip = gethostbyname($hostname);
	}
} else if (strpos($city,"河南")){
	if (strpos($city,"电信")){
		$ipArray = array ( '1.193.217.106', '171.15.36.238' , '123.52.60.226' , '123.52.60.225' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"移动")){
		$ipArray = array ( '183.204.242.221', '111.6.254.236' , '111.6.254.238' , '111.7.89.204' , '111.6.181.65' , '111.7.187.174' , '111.6.254.237' , '111.6.249.206' , '111.6.254.235' , '111.6.254.239' , '111.6.254.241' , '111.6.254.242' , '111.6.254.240' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"联通")){
		$ipArray = array ( '', '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else {
		$ip = gethostbyname($hostname);
	}
} else if (strpos($city,"陕西")){
	if (strpos($city,"电信")){
		$ipArray = array ( '113.137.56.211', '113.137.56.174' , '113.137.56.175' , '113.137.56.210' , '113.137.56.176' , '113.137.56.173' , '113.137.56.209' , '113.137.56.212' , '117.34.40.215' , '117.34.40.217' , '117.34.40.214' , '117.34.40.186' , '117.34.40.185' , '117.34.40.181' , '117.34.40.216' , '117.34.40.184' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"移动")){
		$ipArray = array ( '', '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"联通")){
		$ipArray = array ( '113.201.124.217', '113.201.124.219' , '113.201.124.216' , '113.201.124.223' , '113.201.124.221' , '113.201.124.218' , '113.201.124.222' , '113.201.124.220' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else {
		$ip = gethostbyname($hostname);
	}
} else if (strpos($city,"甘肃")){
	if (strpos($city,"电信")){
		$ipArray = array ( '202.100.79.112', '202.100.79.106' , '202.100.79.107' , '202.100.79.111' , '202.100.79.110' , '202.100.79.108' , '202.100.79.109' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"移动")){
		$ipArray = array ( '', '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"联通")){
		$ipArray = array ( '116.176.95.53', '116.176.95.49' , '116.176.95.54' , '116.176.95.56' , '116.176.95.50' , '116.176.95.52' , '116.176.95.51' , '116.176.95.55' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else {
		$ip = gethostbyname($hostname);
	}
} else if (strpos($city,"宁夏")){
	if (strpos($city,"电信")){
		$ipArray = array ( '36.103.152.223', '36.103.152.231' , '36.103.152.233' , '36.103.152.225' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"移动")){
		$ipArray = array ( '', '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"联通")){
		$ipArray = array ( '', '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else {
		$ip = gethostbyname($hostname);
	}
} else if (strpos($city,"湖南")){
	if (strpos($city,"电信")){
		$ipArray = array ( '118.253.171.225', '118.253.172.203' , '118.253.172.204' , '118.253.172.198' , '118.253.172.201' , '118.253.172.205' , '118.253.172.199' , '118.253.171.222' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"移动")){
		$ipArray = array ( '120.226.157.231', '183.214.3.197' , '183.214.3.214' , '183.214.3.200' , '183.214.3.211' , '183.214.3.212' , '183.214.3.198' , '183.214.3.199' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"联通")){
		$ipArray = array ( '116.162.204.111', '116.162.204.110' , '116.162.204.106' , '116.162.204.109' , '116.162.204.112' , '116.162.204.108' , '116.162.204.105' , '116.162.204.107' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else {
		$ip = gethostbyname($hostname);
	}
} else if (strpos($city,"湖北")){
	if (strpos($city,"电信")){
		$ipArray = array ('119.96.247.178' , '119.96.247.182' , '119.96.247.183' , '119.96.247.181' , '119.96.90.212' , '119.96.247.179' , '119.96.247.185' , '119.96.33.217' , '119.96.247.184' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"移动")){
		$ipArray = array ( '', '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"联通")){
		$ipArray = array ( '116.136.204.230', '122.188.39.251' , '122.188.39.242' , '122.188.39.249' , '122.188.39.250' , '122.188.39.243' , '122.188.39.241' , '122.188.39.248' , '122.188.39.244' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else {
		$ip = gethostbyname($hostname);
	}
} else if (strpos($city,"江西")){
	if (strpos($city,"电信")){
		$ipArray = array ('106.225.232.222' , '106.225.232.226' , '106.225.232.219' , '106.225.232.223' , '106.225.232.220' , '106.225.232.225' , '106.225.232.221' , '106.225.232.224' , '111.77.198.243' , '111.77.198.226' , '111.77.198.244' , '111.77.198.242' , '111.77.198.225' , '111.77.198.252' , '111.77.198.251' , '111.77.198.250' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"移动")){
		$ipArray = array ( '', '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"联通")){
		$ipArray = array ( '116.153.1.193', '118.212.141.243' , '118.212.141.244' , '118.212.141.240' , '118.212.141.242' , '118.212.141.248' , '116.153.1.195' , '118.212.141.241' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else {
		$ip = gethostbyname($hostname);
	}
} else if (strpos($city,"江苏")){
	if (strpos($city,"电信")){
		$ipArray = array ('58.221.32.83' , '221.230.245.102' , '58.215.158.203' , '58.215.158.201' , '58.215.158.199' , '221.230.245.104' , '121.228.188.215' , '221.230.245.103' , '221.230.245.101' , '221.230.245.106' , '221.230.245.107' , '221.230.245.105' , '58.215.158.202' , '58.215.158.197' , '58.215.158.196' , '58.215.158.200' , '58.215.158.198' , '58.215.158.201' , '58.215.158.203' , '180.101.197.250' , '180.101.197.243' , '221.230.245.108' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"移动")){
		$ipArray = array ( '36.150.239.223' , '223.109.129.107' , '223.111.25.226' , '223.109.129.108' , '223.109.129.22' , '223.109.129.109' , '223.109.129.64' , '223.109.129.66' , '223.111.25.225' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"联通")){
		$ipArray = array ( '218.98.31.233', '122.193.203.214' , '122.193.203.215' , '122.193.203.209' , '122.193.203.213' , '122.193.203.212' , '122.193.203.216' , '122.193.203.211' , '122.193.203.210' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else {
		$ip = gethostbyname($hostname);
	}
} else if (strpos($city,"安徽")){
	if (strpos($city,"电信")){
		$ipArray = array ('117.68.76.108' , '117.68.76.103' , '117.68.76.100' , '117.68.76.104' , '117.68.76.106' , '117.68.76.107' , '117.68.76.105' , '117.68.76.99' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"移动")){
		$ipArray = array ( '', '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"联通")){
		$ipArray = array ( '112.122.156.228', '112.122.156.225' , '112.122.156.226' , '112.122.156.231' , '112.122.156.229' , '112.122.156.227' , '112.122.156.230' , '112.122.156.232' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else {
		$ip = gethostbyname($hostname);
	}
} else if (strpos($city,"上海")){
	if (strpos($city,"电信")){
		$ipArray = array ('101.226.28.241' , '122.225.212.213' , '222.73.33.238' , '222.73.33.240' , '222.73.33.234' , '222.73.33.241' , '222.73.33.236' , '222.73.33.237' , '222.73.33.222' , '222.73.33.235' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"移动")){
		$ipArray = array ( '', '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"联通")){
		$ipArray = array ('140.207.236.196' , '140.207.236.192' , '140.207.236.194' , '140.207.236.191' , '140.207.236.190' , '140.207.236.195' , '140.207.236.197' , '140.207.236.193');
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else {
		$ip = gethostbyname($hostname);
	}
} else if (strpos($city,"福建")){
	if (strpos($city,"电信")){
		$ipArray = array ( '117.27.148.238', '117.27.148.240' , '117.27.148.244' , '117.27.148.242' , '117.27.148.241' , '117.27.148.239' , '117.27.148.243' , '117.27.148.237' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"移动")){
		$ipArray = array ( '112.50.108.189', '112.50.108.183' , '112.50.108.186' , '112.50.108.188' , '112.50.108.244' , '112.50.108.185' , '112.50.108.187' , '112.50.108.184' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"联通")){
		$ipArray = array ( '', '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else {
		$ip = gethostbyname($hostname);
	}
} else if (strpos($city,"广东")){
	if (strpos($city,"电信")){
		$ipArray = array ( '183.2.193.200', '183.2.193.202' , '183.2.193.201' , '183.2.193.203' , '183.2.193.204' , '183.2.193.205' , '183.2.193.198' , '183.2.193.199' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"移动")){
		$ipArray = array ( '120.233.47.78', '183.240.241.107' , '120.233.47.75' , '120.233.47.73' , '183.240.241.108' , '183.240.241.104' , '120.233.47.74' , '183.240.241.106' , '120.233.47.79' , '120.233.47.80' , '120.233.47.76' , '120.233.47.77' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"联通")){
		$ipArray = array ( '163.179.228.106', '163.179.228.105' , '163.179.228.99' , '163.179.228.104' , '163.179.228.101' , '163.179.228.103' , '163.179.228.100' , '163.179.228.102' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else {
		$ip = gethostbyname($hostname);
	}
} else if (strpos($city,"广西")){
	if (strpos($city,"电信")){
		$ipArray = array ( '124.227.25.196' , '124.227.25.197' , '124.227.25.198' , '124.227.25.199' , '124.227.25.200' , '124.227.25.201' , '124.227.25.202' , '124.227.25.203' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"移动")){
		$ipArray = array ( '36.159.112.112', '36.159.112.106' , '36.159.112.107' , '36.159.112.110' , '36.159.112.109' , '36.159.112.105' , '36.159.112.111' , '36.159.112.108' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"联通")){
		$ipArray = array ( '121.31.230.205', '121.31.230.220' , '121.31.230.219' , '121.31.230.221' , '121.31.230.216' , '121.31.230.204' , '121.31.230.218' , '121.31.230.217' , '121.31.237.230' , '121.31.237.231' , '121.31.237.232' , '121.31.237.233' , '121.31.237.229' , '121.31.237.226' , '121.31.237.227' , '121.31.237.228' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else {
		$ip = gethostbyname($hostname);
	}
} else if (strpos($city,"四川")){
	if (strpos($city,"电信")){
		$ipArray = array ('118.112.226.211' , '118.112.226.212' , '118.112.226.205'  , '118.112.226.206'  , '118.112.226.207'  , '118.112.226.208'  , '118.112.226.209'  , '118.112.226.210' , '182.140.147.215' , '182.140.147.216' , '182.140.147.217' , '182.140.147.210' , '182.140.147.211' , '182.140.147.212' , '182.140.147.213' , '182.140.147.214' , '171.220.246.244' , '171.220.246.250' , '171.220.246.248' , '171.220.246.253' , '171.220.246.243' , '171.220.246.251' , '171.220.246.252' , '171.220.246.249' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"移动")){
		$ipArray = array ( '' , '' , '' , '' , '' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"联通")){
		$ipArray = array ( '112.194.67.108'  , '112.194.67.110'  , '112.194.67.106'  , '112.194.67.112'  , '112.194.67.107'  , '112.194.67.111' , '112.194.67.105' , '112.194.67.109' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else {
		$ip = gethostbyname($hostname);
	}
} else if (strpos($city,"重庆")){
	if (strpos($city,"电信")){
		$ipArray = array ( '61.128.153.229', '119.84.54.235' , '61.128.153.231' , '119.84.54.231' , '61.128.153.228' , '61.128.153.234' , '119.84.54.234' , '61.128.153.227' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"移动")){
		$ipArray = array ( '', '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"联通")){
		$ipArray = array ( '58.144.231.244', '58.144.231.237' , '58.144.231.243' , '58.144.231.239' , '58.144.231.241' , '58.144.231.242' , '58.144.231.238' , '58.144.231.240' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else {
		$ip = gethostbyname($hostname);
	}
} else if (strpos($city,"贵州")){
	if (strpos($city,"电信")){
		$ipArray = array ( '111.123.41.115', '111.123.41.121' , '111.123.41.117' , '111.123.41.118' , '111.123.41.120' , '111.123.41.116' , '111.123.41.114' , '111.123.41.119' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"移动")){
		$ipArray = array ( '', '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"联通")){
		$ipArray = array ( '116.171.176.229', '116.171.176.231' , '116.171.176.234' , '116.171.176.232' , '116.171.176.235' , '116.171.176.233' , '116.171.176.230' , '116.171.176.236' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else {
		$ip = gethostbyname($hostname);
	}
} else if (strpos($city,"云南")){
	if (strpos($city,"电信")){
		$ipArray = array ( '182.242.89.200', '182.242.89.201' , '182.242.89.194' , '182.242.89.198' , '182.242.89.195' , '182.242.89.196' , '182.242.89.199' , '182.242.89.197' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"移动")){
		$ipArray = array ( '', '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"联通")){
		$ipArray = array ( '180.130.102.231', '180.130.102.227' , '180.130.102.225' , '180.130.102.232' , '180.130.102.229' , '180.130.102.230' , '180.130.102.228' , '180.130.102.226' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else {
		$ip = gethostbyname($hostname);
	}
} else if (strpos($city,"西藏")){
	if (strpos($city,"电信")){
		$ipArray = array ( '', '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"移动")){
		$ipArray = array ( '117.180.231.54', '117.180.231.51' , '117.180.231.52' , '117.180.231.53' , '117.180.231.50' , '117.180.231.93' , '117.180.231.94' , '117.180.231.49' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"联通")){
		$ipArray = array ( '43.242.166.236', '43.242.166.183' , '43.242.166.237' , '43.242.166.187' , '43.242.166.235' , '43.242.166.238' , '43.242.166.239' , '43.242.166.190' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else {
		$ip = gethostbyname($hostname);
	}
} else if (strpos($city,"青海")){
	if (strpos($city,"电信")){
		$ipArray = array ( '118.213.94.113', '118.213.94.108' , '118.213.94.112' , '118.213.94.110' , '118.213.94.107' , '118.213.94.106' , '118.213.94.111' , '118.213.94.109' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"移动")){
		$ipArray = array ( '', '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"联通")){
		$ipArray = array ( '116.177.250.239', '116.177.250.238' , '116.177.250.244' , '116.177.250.243' , '116.177.250.242' , '116.177.250.241' , '116.177.250.240' , '116.177.250.237' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else {
		$ip = gethostbyname($hostname);
	}
} else if (strpos($city,"新疆")){
	if (strpos($city,"电信")){
		$ipArray = array ( '110.157.250.203', '110.157.250.204' , '110.157.250.208' , '110.157.250.210' , '110.157.250.209' , '110.157.247.227' , '110.157.250.207' , '110.157.247.225' , '110.157.247.229' , '110.157.250.200' , '110.157.247.226' , '110.157.247.230' , '110.157.247.233' , '110.157.247.232' , '110.157.250.199' , '110.157.247.231' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"移动")){
		$ipArray = array ( '36.189.232.109', '36.189.232.110' , '36.189.232.111' , '36.189.233.25' , '36.189.233.26' , '36.189.233.27' , '36.189.233.28' , '36.189.233.29' , '36.189.233.30' , '36.189.233.31' , '36.189.233.32' , '36.189.232.104' , '36.189.232.105' , '36.189.232.106' , '36.189.232.107' , '36.189.232.108' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"联通")){
		$ipArray = array ( '116.178.188.57', '116.178.188.52' , '116.178.188.56' , '116.178.188.51' , '116.178.188.54' , '116.178.188.50' , '116.178.188.53' , '116.178.188.55' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else {
		$ip = gethostbyname($hostname);
	}
} else if (strpos($city,"海南")){
	if (strpos($city,"电信")){
		$ipArray = array ( '218.77.199.226', '218.77.199.225' , '218.77.199.222' , '218.77.199.227' , '218.77.199.224' , '218.77.199.221' , '218.77.199.228' , '218.77.199.223' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"移动")){
		$ipArray = array ( '111.29.42.178', '111.29.42.145' , '111.29.42.142' , '111.29.42.143' , '111.29.42.147' , '111.29.42.146' , '111.29.42.148' , '111.29.42.144' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else if (strpos($city,"联通")){
		$ipArray = array ( '', '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' , '' );
		$ipInd = array_rand($ipArray);
		$ip = $ipArray[$ipInd];
	} else {
		$ip = gethostbyname($hostname);
	}
} else {
	if (strpos($city,"电信")){
		$ipInd = array_rand($Telecom_IP);
		$ip = $Telecom_IP[$ipInd];
	} else if (strpos($city,"移动")){
		$ipInd = array_rand($CMCC_IP);
		$ip = $CMCC_IP[$ipInd];
	} else if (strpos($city,"联通")){
		$ipInd = array_rand($Unicom_IP);
		$ip = $Unicom_IP[$ipInd];
	} else {
		$ip = gethostbyname($hostname);
	}
}

if ( $ip == '' ){
	if (strpos($city,"电信")){
		$ipInd = array_rand($Telecom_IP);
		$ip = $Telecom_IP[$ipInd];
	} else if (strpos($city,"移动")){
		$ipInd = array_rand($CMCC_IP);
		$ip = $CMCC_IP[$ipInd];
	} else if (strpos($city,"联通")){
		$ipInd = array_rand($Unicom_IP);
		$ip = $Unicom_IP[$ipInd];
	} else {
		$ip = gethostbyname($hostname);
	}
}

// 构建 URL
$url = "http://{$ip}/liveali-tpgq.cctv.cn/live/" . $id .".m3u8";
header('location:'   . $url);
?>
